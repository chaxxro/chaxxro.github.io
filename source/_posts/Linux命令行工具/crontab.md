---
toc:
  enable: true
  number: false
  max_depth: 3
title: crontab
date: 2023-04-17 11:27:10
tags: 命令行工具
categories: Linux 命令行
---

crontable 是 cron 的配置文件

- var/spool/cron/ 目录下存放的是每个用户包括 root 的 crontab 任务，每个任务以创建者的名字命名
- /etc/crontab 这个文件负责调度各种管理和维护任务。
- /etc/cron.d/ 这个目录用来存放任何要执行的 crontab 文件或脚本。

还可以把脚本放在 /etc/cron.hourly、/etc/cron.daily、/etc/cron.weekly、/etc/cron.monthly 目录中，让它每小时/天/星期/月执行一次

```sh
crontab [-u user] file
crontab [-u user] { -l | -r | -e }

# -e 编辑工作表
# -l 列出工作表里的命令
# -r 删除工作作
```

crontab 的构成为时间+动作，其时间格式是：分 时 日 月 周

- 第 1 列分钟 0～59
- 第 2 列小时 0～23，0 表示子夜
- 第 3 列日 1～31
- 第 4 列月 1～12
- 第 5 列星期 0～7，0 和 7 表示星期天
- 第 6 列要运行的命令

操作符有：

- `*` 取值范围内的所有数字
- `/` 每过多少个数字
- `-` 从X到Z
- `,` 散列数字

```sh
# 每分钟执行一次
* * * * * task

# 每小时的第 3 和第 15 分钟执行
3,15 * * * * task

# 在上午 8 点到 11 点的第 3 和第 15 分钟执行
3,15 8-11 * * * task

# 每隔两天的上午 8 点到 11 点的第 3 和第 15 分钟执行
3,15 8-11 */2  *  * task

# 每周一上午 8 点到 11 点的第 3 和第 15 分钟执行
3,15 8-11 * * 1 task

# 每晚的 21:30
30 21 * * * task

# 每月 1、10、22 日的 4:45
45 4 1,10,22 * * task

# 每周六、周日的 1:10
10 1 * * 6,0 task

# 每天 18:00 至 23:00 之间每隔 30 分钟
0,30 18-23 * * * task

# 每星期六的晚上 11:00
0 23 * * 6 task

 #每一小时
* */1 * * * task

#晚上 11 点到早上 7 点之间，每隔一小时
0 23-7 * * * task
```