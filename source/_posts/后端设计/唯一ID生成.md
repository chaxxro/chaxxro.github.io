---
toc:
  enable: true
  number: false
  max_depth: 3
title: 唯一 ID 生成
date: 2023-08-10 09:08:42
tags: 后端设计
categories: 后端设计
---

## 数据库自增长特性

利用数据库特性，设置表主键 ID 为自增，数据写入后 ID 自增

优点是实现简单，结果可靠

缺点是使用起来不灵活，为了保证安全，唯一序列号需要在数据插入后才能得到

## 分布式缓存

利用 Redis `incr` 命令，原子获取唯一序列号

优点是实现简单，不仅可以分配一个 ID，而且可以分配一个 ID 范围

缺点是依赖 Redis，当 Redis 不可用时，无法生成序列号

## 数据库乐观锁

在数据库中维护一个 key、开始数字、步长数这样一个数据结构，应用通过调用数据库乐观锁方式获取并占用一段数字，应用内通过维护这一段数字实现唯一序号

优点是使用灵活，可靠性高

缺点是不能保证序号顺序输出