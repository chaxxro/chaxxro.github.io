---
toc:
  enable: true
  number: false
  max_depth: 3
title: proc 文件系统
date: 2023-07-20 21:55:43
tags: 操作系统
categories: 文件系统
---

Linux 系统上的 /proc 目录是一种虚拟文件系统，存储的是当前内核运行状态的一系列特殊文件，用户可以通过这些文件查看有关系统硬件及当前正在运行进程的信息，甚至可以通过更改其中某些文件来改变内核的运行状态

- buddyinfo：内存碎片问题的相关信息文件

- cmdline：系统启动时传递至内核的相关参数信息

- cpuinfo：处理器的相关信息的文件

- crypto：已安装的内核使用的密码算法

- devices：已经加载的所有块设备和字符设备的信息

- diskstats：每块磁盘设备的磁盘 IO 统计信息列表

- filesystems：支持的文件系统类型列表文件

- kmsg：内核输出的信息

- loadavg：保存关于 CPU 和磁盘 IO 的负载平均值

- locks：当前由内核锁定的文件的相关信息，包含内核内部的调试数据

- meminfo：当前内存的利用状况等的信息

- mounts：当前挂载的所有文件系统

- stat：实时追踪自系统上次启动以来的多种统计信息

- swaps：当前系统上的交换分区及其空间利用信息

- uptime：系统上次启动以来的运行时间

- version：内核版本号

- vmstat：系统虚拟内存的多种统计数据

- interrupts：中断使用情况

```sh
# CPU 核数
grep 'model name' /proc/cpuinfo | wc -l

# 中断信息
watch -d cat /proc/interrupts

# 系统的 CPU 和任务统计信息
cat /proc/stat | grep ^cpu
```

## 以数字命名的目录

数字表示系统当前正在运行进程的进程号，里面包含对应进程相关的多个信息文件

{% asset_img 01.png %}

- cmdline：启动当前进程的完整命令，但僵尸进程目录中的此文件不包含任何信息

- cwd：指向当前进程运行目录的一个符号链接

- environ：当前进程的环境变量列表，彼此间用空字符隔开

-exe：指向启动当前进程的可执行文件的符号链接

- fd：包含当前进程打开的每一个文件的文件描述符的目录，这些文件描述符是指向实际文件的一个符号链接

- limits：当前进程所使用的每一个受限资源的软限制、硬限制和管理单元

- maps：当前进程关联到的每个可执行文件和库文件在内存中的映射区域及其访问权限所组成的列表

- mem：当前进程所占用的内存空间，由 `open`、`read` 和 `lseek` 等系统调用使用，不能被用户读取

- root：指向当前进程运行根目录的符号链接
 
- stat：当前进程的状态信息
 
- statm：当前进程占用内存的状态信息
 
- status：与 stat 所提供信息类似，但可读性较好
 
- task：目录文件，包含由当前进程所运行的每一个线程的相关信息，每个线程的相关信息文件均保存在一个由线程号 tid 命名的目录中，这类似于其内容类似于每个进程目录中的内容
