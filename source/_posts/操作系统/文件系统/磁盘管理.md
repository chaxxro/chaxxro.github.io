---
toc:
  enable: true
  number: false
  max_depth: 3
title: 磁盘结构
date: 2023-07-20 20:41:33
tags: 操作系统
categories: 文件系统
---

磁盘分磁盘面、磁头、磁道、柱面和扇区

磁盘由多个盘片堆叠成的，每个盘面都对应一个磁头。所有的磁头都连在同一个磁臂上，所有磁头只能共同进退。磁臂可以沿着盘面作径向运动，从而带动磁头到达不同的磁道来对不同扇区的读写操作

{% asset_img 01.webp %}

磁盘表面被划分长的一个个磁道

{% asset_img 02.webp %}

一个磁道又被划分为一个个扇区，所有盘面中的相对位置相同的磁道组成了柱面

{% asset_img 03.webp %}

## 磁盘 IO

1. 磁头径向移动来寻找数据所在的磁道，这部分时间叫寻道时间

2. 找到目标磁道后通过盘面旋转，将目标扇区移动到磁头的正下方

3. 向目标扇区读取或者写入数据

单次磁盘 IO 时间 = 寻道时间 + 旋转延迟 + 存取时间

旋转延迟大约为 0-6ms，存取时间一般为 1ms，寻道时间大概在 3-15ms

## 磁盘分区

同一分区下的数据经常会一起读取，所以操作系统通过按磁道对应的柱面划分分区，来降低磁盘 IO 所花费的的寻道时间 ，进而提高磁盘的读写性能

## 磁盘空间划分

可以把一个磁盘看做是一个大的数组，每个数组成员的大小通常是 512 byte，这是磁盘控制器所能够读写的最小单元，称之为物理块 Block

文件系统能读写的最小块称为逻辑块 IO Block，它的大小一般在 512 byte 到 16 KiB 之间，因此一个 IO Block 会对应一个或多个连续的物理块，典型的逻辑块大小通常是是 4 KiB

在 IO Block 之上还有块组的概念，文件系统都由大量块组组成，在硬盘上相继排布