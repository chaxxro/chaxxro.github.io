---
toc:
  enable: true
  number: false
  max_depth: 3
title: 设计原则
date: 2023-06-28 16:33:57
tags: 设计模式
categories: 设计模式
---

## 开闭原则

开闭原则就是说对扩展开放，对修改关闭

在程序需要进行拓展的时候，不能去修改原有的代码，而是要扩展原有代码，实现一个热插拔的效果

## 单一职责原则

一个类只负责完成一个职责或者功能，不要设计大而全的类，要设计粒度小、功能单一的类

一个类包含了两个或者两个以上业务不相干的功能，那就是职责不够单一，应该将它拆分成多个功能更加单一、粒度更细的类。

## 里氏替换原则

子类对象能够替换程序中父类对象出现的任何地方，并且保证原来程序的逻辑行为不变及正确性不被破坏

子类在设计的时候要遵守父类的行为约。父类定义了函数的行为约定，那子类可以改变函数的内部实现逻辑，但不能改变函数原有的行为约定。这里的行为约定包括：函数声明要实现的功能；对输入、输出、异常的约定，甚至包括注释中所罗列的任何特殊说明

## 接口隔离原则

调用者或者使用者不应该被强迫依赖它不需要的接口

如果把接口理解为一组接口集合，可以是某个微服务的接口，也可以是某个类库的接口等。如果部分接口只被部分调用者使用，就需要将这部分接口隔离出来，单独给这部分调用者使用，而不强迫其他调用者也依赖这部分不会被用到的接口

如果把接口理解为单个 API 接口或函数，部分调用者只需要函数中的部分功能，那就需要把函数拆分成粒度更细的多个函数，让调用者只依赖它需要的那个细粒度函数

如果把接口理解为 OOP 中的接口，那接口的设计要尽量单一，不要让接口的实现类和调用者，依赖不需要的接口函数

接口隔离原则相对于单一职责原则，一方面它更侧重于接口的设计，另一方面它的思考的角度不同。它提供了一种判断接口是否职责单一的标准：通过调用者如何使用接口来间接地判定。如果调用者只使用部分接口或接口的部分功能，那接口的设计就不够职责单一

## 依赖反转原则

### 控制反转 IOC

控制指的是对程序执行流程的控制，反转指的是由程序员自己控制程序的执行变成程序的执行流程通过框架来控制，流程的控制权从程序员反转到了框架

控制反转并不是一种具体的实现技巧，而是一个比较笼统的设计思想，一般用来指导框架层面的设计

### 依赖注入 DI

依赖注入跟控制反转恰恰相反，它是一种具体的编码技巧

DI 指不通过 `new()` 的方式在类内部创建依赖类对象，而是将依赖的类对象在外部创建好之后，通过构造函数、函数参数等方式传递或注入给类使用

通过依赖注入的方式来将依赖的类对象传递进来，这样就提高了代码的扩展性

### 依赖反转 DIP

这条原则主要还是用来指导框架层面的设计

- 调用者不要依赖被调用者

- 调用者和被调用者应该通过抽象来互相依赖

- 抽象不要依赖具体实现细节，具体实现细节依赖抽象

## 迪米特法则

高内聚是指相近的功能应该放到同一个类中，不相近的功能不要放到同一个类中。相近的功能往往会被同时修改，放到同一个类中，修改会比较集中，代码容易维护

松耦合是指在代码中，类与类之间的依赖关系简单清晰。即使两个类有依赖关系，一个类的代码改动不会或者很少导致依赖类的代码改动

迪米特法则指不该有直接依赖关系的类之间不要有依赖，有依赖关系的类之间尽量只依赖必要的接口